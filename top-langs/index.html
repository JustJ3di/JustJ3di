<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>JustJ3di — Berserk Languages Chart</title>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Style -->
    <style>
        body {
            background: #0b0b0b;
            color: #e4e4e4;
            font-family: 'Trebuchet MS', sans-serif;
            text-align: center;
            padding-top: 40px;
        }

        h2 {
            color: #b30000;
            letter-spacing: 2px;
            text-shadow: 0 0 10px #5a0000;
        }

        canvas {
            max-width: 520px;
            margin: auto;
            filter: drop-shadow(0 0 12px #400000);
        }
    </style>
</head>

<body>

<h2>⚔️ Top Languages — Berserk Edition</h2>
<canvas id="langChart"></canvas>

<script>
async function fetchLanguages(username) {
    const repos = await fetch(`https://api.github.com/users/${username}/repos?per_page=100`)
        .then(res => res.json());

    const totals = {};

    for (const repo of repos) {
        const langData = await fetch(repo.languages_url).then(res => res.json());
        for (const [lang, value] of Object.entries(langData)) {
            totals[lang] = (totals[lang] || 0) + value;
        }
    }
    return totals;
}

async function drawChart() {
    const username = "JustJ3di"; // <-- Cambia qui se vuoi
    const langTotals = await fetchLanguages(username);

    const ctx = document.getElementById("langChart").getContext("2d");

    const bloodRed = [
        '#8b0000', '#b30000', '#660000', '#400000',
        '#cc0000', '#330000', '#990000'
    ];

    new Chart(ctx, {
        type: "doughnut",
        data: {
            labels: Object.keys(langTotals),
            datasets: [{
                data: Object.values(langTotals),
                backgroundColor: bloodRed,
                borderColor: "#111",
                borderWidth: 3,
                hoverBorderWidth: 5,
                hoverBorderColor: "#ff1a1a"
            }]
        },
        options: {
            cutout: "55%",
            plugins: {
                legend: {
                    labels: {
                        color: "#e4e4e4",
                        font: { size: 14 }
                    }
                }
            },
            animation: {
                animateRotate: true,
                animateScale: true,
                duration: 2000,
                easing: "easeOutQuart"
            }
        }
    });
}

drawChart();
</script>

</body>
</html>
